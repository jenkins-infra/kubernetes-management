replicaCount: 2
resources:
  limits:
    cpu: 1000m
    memory: 2048Mi
  requests:
    cpu: 200m
    memory: 500Mi
nodeSelector:
  kubernetes.io/arch: arm64
tolerations:
  - key: "kubernetes.io/arch"
    operator: "Equal"
    value: "arm64"
    effect: "NoSchedule"
repository:
  name: httpd-binary
  # To reuse an existing PVC, ensure repository.name is set to the PVC name, set the value below to true and keep persistentVolumeClaim to false
  reuseExistingPersistentVolumeClaim: false
  persistentVolumeClaim:
    enabled: true
    spec:
      accessModes:
        - ReadOnlyMany
      resources:
        requests:
          storage: 1Gi  # See httpd file share size in https://github.com/jenkins-infra/azure/blob/main/updates.jenkins.io.tf
      storageClassName: azurefile-csi-premium
      volumeMode: Filesystem
      volumeName: httpd-binary
  persistentVolume:
    enabled: true
    spec:
      accessModes:
        - ReadOnlyMany
      storageSize: 1Gi  # See httpd file share size in https://github.com/jenkins-infra/azure/blob/main/updates.jenkins.io.tf
      storageClassName: azurefile-csi-premium
      azureFile:
        resourceGroup: updates-jenkins-io
        shareName: updates-jenkins-io-httpd
        readOnly: true
      additionalSpec:
        persistentVolumeReclaimPolicy: Retain
        mountOptions:
          - dir_mode=0755
          - file_mode=0644
          - uid=1000
          - gid=1000
          - mfsymlinks
          - nobrl
          - serverino
          - cache=strict
  secrets:
    enabled: true

ingress:
  enabled: true
  className: public-nginx
  annotations:
    "cert-manager.io/cluster-issuer": "letsencrypt-prod"
    "nginx.ingress.kubernetes.io/ssl-redirect": "true"
  hosts:
    - host: azure.updates.jenkins.io
      paths:
        - path: /
          backendService: httpd
  tls:
    - secretName: updates-jenkins-io-tls
      hosts:
        - azure.updates.jenkins.io
