providers:
  aks:
    enabled: true
datadog:
  clusterName: 'infracijioagents1'
  env:
    - name: DD_HOSTNAME
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
  kubelet:
    host:
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
    hostCAPath: /etc/kubernetes/certs/kubeletserver.crt
    # Required as of Agent 7.35 because Kubelet certificates in AKS do not have a Subject Alternative Name (SAN) set.
    tlsVerify: false
clusterAgent:
  image:
    pullSecrets:
      - name: "dockerhub-credential"
  nodeSelector:
    kubernetes.io/arch: arm64
    agentpool: systempool1 # select the system pool not on agent pools
  tolerations: # allow to start on system nodepool
    - key: "CriticalAddonsOnly"
      operator: "Equal"
      value: "true"
      effect: "NoSchedule"
agents:
  tolerations:
    # These tolerations are needed to run the agents on all the pools
    - key: "infraci.jenkins.io/agents"
      operator: "Equal"
      value: "true"
      effect: "NoSchedule"
    - key: "CriticalAddonsOnly"
      operator: "Equal"
      value: "true"
      effect: "NoSchedule"
